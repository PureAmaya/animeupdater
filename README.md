

# animeupdater

ä¸€ä¸ªä¸º [autofilm](https://github.com/Akimio521/AutoFilm) é¡¹ç›®è®¾è®¡çš„æ™ºèƒ½ã€è‡ªåŠ¨åŒ–çš„ç®¡ç†å·¥å…·ï¼Œç‰¹åˆ«é€‚ç”¨äºéœ€è¦è§¦å‘ cron æ›´æ–°è®¡åˆ’çš„åœºæ™¯ã€‚

-----

## ğŸ“– ç®€ä»‹

è¿™ä¸ªé¡¹ç›®æœ€åˆæ˜¯ä¸ºäº†è‡ªåŠ¨åŒ–ç®¡ç†ä¸€ä¸ªåŸºäº [autofilm](https://github.com/Akimio521/AutoFilm) çš„ Docker æœåŠ¡è€Œåˆ›å»ºçš„ï¼Œä½†å®ƒçš„è®¾è®¡è¶³å¤Ÿé€šç”¨ï¼Œå¯ä»¥è½»æ¾é€‚é…ä»»ä½•æœ‰ç±»ä¼¼éœ€æ±‚çš„é¡¹ç›®ã€‚

## âœ¨ ä¸»è¦ç‰¹æ€§

  - **äº¤äº’å¼èœå•**ï¼šæä¾›æ¸…çˆ½çš„å‘½ä»¤è¡Œèœå•ï¼Œè½»æ¾ç®¡ç†æ‚¨çš„æœåŠ¡ã€‚
  - **ä¸€é”®å®‰è£…**ï¼šå•è¡Œå‘½ä»¤å³å¯å®Œæˆå·¥å…·çš„ä¸‹è½½ã€å®‰è£…å’Œç³»ç»Ÿçº§å‘½ä»¤æ³¨å†Œã€‚
  - **æ™ºèƒ½ä¾èµ–ç®¡ç†**ï¼šå®‰è£…æ—¶è‡ªåŠ¨æ£€æµ‹å¹¶å®‰è£…æ‰€éœ€ä¾èµ–ï¼ˆå¦‚ `yq`ï¼‰ï¼Œæ”¯æŒä¸»æµ Linux å‘è¡Œç‰ˆå’Œ macOSã€‚
  - **åŠ¨æ€ CRON æ›´æ–°**ï¼šæ ¸å¿ƒåŠŸèƒ½ï¼Œä¸€é”®å°†é…ç½®æ–‡ä»¶ä¸­**æ‰€æœ‰**çš„ `cron` è®¡åˆ’æ›´æ–°ä¸ºæŒ‡å®šæ—¶é—´ï¼ˆç›®å‰è®¾å®šä¸ºâ€œä¸¤åˆ†é’Ÿåâ€ï¼‰ã€‚
  - **æœåŠ¡ç®¡ç†**ï¼šå¿«æ·æ‰§è¡Œ `docker-compose` çš„ `up`, `down`, `logs` ç­‰å¸¸ç”¨æ“ä½œã€‚
  - **é«˜åº¦å¯é…ç½®**ï¼šåˆæ¬¡å®‰è£…æ—¶æŒ‡å®šé¡¹ç›®è·¯å¾„ï¼Œå·¥å…·å°†è‡ªåŠ¨è®°å¿†ã€‚
  - **å®‰å…¨å¯é **ï¼šä½¿ç”¨ `yq` å®‰å…¨åœ°ä¿®æ”¹ YAML æ–‡ä»¶ï¼Œé¿å…äº† `sed` ç­‰å·¥å…·çš„æ ¼å¼é£é™©ã€‚

## ğŸ¯ ç¯å¢ƒè¦æ±‚

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„ç³»ç»Ÿæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

1.  **æ“ä½œç³»ç»Ÿ**ï¼šLinux æˆ– macOSã€‚
2.  **Docker ç¯å¢ƒ**ï¼šå·²å®‰è£…å¹¶æ­£åœ¨è¿è¡Œçš„ Docker å’Œ Docker Composeã€‚
3.  **å¿…è¦å·¥å…·**ï¼šå·²å®‰è£… `curl` æˆ– `wget` ä»¥ä¸‹è½½å®‰è£…è„šæœ¬ã€‚
4.  **ç®¡ç†å‘˜æƒé™**ï¼šæ‹¥æœ‰ `sudo` æƒé™ï¼Œç”¨äºå®‰è£…å·¥å…·å’Œä¾èµ–ã€‚
5.  **é¡¹ç›®æ–‡ä»¶**ï¼šæ‚¨è‡ªå·±çš„ Docker Compose é¡¹ç›®æ–‡ä»¶å·²å‡†å¤‡å°±ç»ªï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ã€‚

## ğŸš€ ä¸€é”®å®‰è£…

æˆ‘ä»¬æä¾›äº†ä¸€è¡Œå‘½ä»¤æ¥å®Œæˆæ‰€æœ‰å®‰è£…å·¥ä½œã€‚å®ƒä¼šè‡ªåŠ¨ä¸‹è½½æœ€æ–°çš„ `animeupdater` è„šæœ¬ï¼Œå¹¶æ‰§è¡Œå…¶å†…ç½®çš„å®‰è£…ç¨‹åºã€‚

> **é‡è¦æç¤º**ï¼šè¯·å°†ä¸‹æ–¹å‘½ä»¤ä¸­çš„ `YOUR_USERNAME` å’Œ `animeupdater` æ›¿æ¢ä¸ºæ‚¨çš„å®é™… GitHub ç”¨æˆ·åå’Œä»“åº“åï¼

### ä½¿ç”¨ cURL (æ¨è)

```bash
bash -c "$(curl -LfsS https://raw.githubusercontent.com/PureAmaya/animeupdater/main/animeupdater)" -- install
```

### ä½¿ç”¨ Wget

```bash
bash -c "$(wget -O- https://raw.githubusercontent.com/PureAmaya/animeupdater/main/animeupdater)" -- install
```

å®‰è£…è¿‡ç¨‹ä¸­ï¼Œè„šæœ¬ä¼šï¼š

1.  æ£€æŸ¥å¹¶å®‰è£… `Docker` / `yq` ç­‰ä¾èµ–ã€‚
2.  è¯·æ±‚æ‚¨è¾“å…¥ Docker é¡¹ç›®çš„**ç»å¯¹è·¯å¾„**ã€‚
3.  å°† `animeupdater` å®‰è£…åˆ° `/usr/local/bin`ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªå…¨å±€å‘½ä»¤ã€‚

## ğŸ› ï¸ å¦‚ä½•ä½¿ç”¨

å®‰è£…æˆåŠŸåï¼Œæ‚¨å¯ä»¥åœ¨ä»»ä½•ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œç›´æ¥è¿è¡Œï¼š

```bash
animeupdater
```

æ‚¨å°†çœ‹åˆ°ä¸€ä¸ªæ¸…æ™°çš„äº¤äº’å¼èœå•ï¼š

```text
========================================
         animeupdater v1.0
========================================
 é¡¹ç›®è·¯å¾„: /path/to/your/docker/project
----------------------------------------
  1. æ‰‹åŠ¨å…³é—­ Docker Compose æœåŠ¡
  2. æ‰‹åŠ¨å¼€å¯ Docker Compose æœåŠ¡
  3. æ›´æ–°æ‰€æœ‰ CRON å¹¶é‡å¯æœåŠ¡
  4. æŸ¥çœ‹æœåŠ¡æ—¥å¿— (å®æ—¶)
  5. è¿›å…¥é¡¹ç›®ç›®å½• (å¼€å¯æ–°Shell)
  0. é€€å‡ºè„šæœ¬
----------------------------------------
è¯·è¾“å…¥é€‰é¡¹ [0-5]:
```

æ ¹æ®æç¤ºè¾“å…¥æ•°å­—ï¼Œå³å¯æ‰§è¡Œç›¸åº”æ“ä½œã€‚

### å¸è½½å·¥å…·

å¦‚æœæ‚¨æƒ³ç§»é™¤æœ¬å·¥å…·ï¼Œåªéœ€è¿è¡Œï¼š

```bash
sudo animeupdater uninstall
```

## ğŸ“ é¡¹ç›®æ–‡ä»¶ç»“æ„è¦æ±‚

`animeupdater` è¦æ±‚æ‚¨çš„é¡¹ç›®éµå¾ªç‰¹å®šçš„æ–‡ä»¶ç»“æ„ï¼Œä»¥ä¾¿è„šæœ¬èƒ½å¤Ÿæ­£ç¡®æ‰¾åˆ°é…ç½®æ–‡ä»¶ã€‚åœ¨è¿è¡Œå®‰è£…ç¨‹åº**ä¹‹å‰**ï¼Œè¯·ç¡®ä¿æ‚¨çš„é¡¹ç›®ç›®å½•å¦‚ä¸‹æ‰€ç¤ºï¼š

```
/path/to/your/project/    <-- å®‰è£…æ—¶æ‚¨éœ€è¦è¾“å…¥çš„è·¯å¾„
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ config/
    â””â”€â”€ config.yaml       <-- åŒ…å« cron è®¡åˆ’çš„é…ç½®æ–‡ä»¶
```

å…¶ä¸­ï¼Œ`config.yaml` çš„å†…å®¹åº”ç±»ä¼¼äºautofilmçš„[é…ç½®æ–‡ä»¶](https://github.com/Akimio521/AutoFilm/blob/main/config/config.yaml.example)ï¼š

```yaml
Settings:
  DEV: False
Alist2StrmList:
  - id: åŠ¨æ¼«
    cron: '11 22 * * *'  # è„šæœ¬ä¼šè‡ªåŠ¨ä¿®æ”¹æ­¤å¤„çš„ cron å€¼
    url: https://pan.example.com
    # ... å…¶ä»–é…ç½®
  - id: ç”µå½±
    cron: '15 03 * * *'  # è„šæœ¬ä¹Ÿä¼šè‡ªåŠ¨ä¿®æ”¹æ­¤å¤„çš„ cron å€¼
    url: https://pan.example.com
    # ... å…¶ä»–é…ç½®
```

## ğŸ’¡ æŠ€æœ¯å®ç°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªçº¯ `Bash` è„šæœ¬ï¼Œå…¶æ ¸å¿ƒåŠŸèƒ½ä¾èµ–äºä»¥ä¸‹å·¥å…·ï¼š

  - `docker-compose`ï¼šç”¨äºç®¡ç† Docker æœåŠ¡çš„ç”Ÿå‘½å‘¨æœŸã€‚
  - `yq`ï¼šä¸€ä¸ªå¼ºå¤§çš„å‘½ä»¤è¡Œ YAML å¤„ç†å™¨ï¼Œç”¨äºå®‰å…¨ã€å‡†ç¡®åœ°è¯»å–å’Œä¿®æ”¹ `.yaml` æ–‡ä»¶å†…å®¹ã€‚
  - `curl` / `wget`ï¼šç”¨äºå®ç°ä¸€é”®å®‰è£…åŠŸèƒ½ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼å¦‚æœæ‚¨æœ‰ä»»ä½•å¥½çš„æƒ³æ³•æˆ–å‘ç°äº† Bugï¼Œè¯·éšæ—¶æäº¤ Pull Request æˆ–åˆ›å»º Issueã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [MIT License](https://opensource.org/licenses/MIT) æˆæƒã€‚
